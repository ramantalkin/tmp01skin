<?php
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE_AFL.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category    design
 * @package     base_default
 * @copyright   Copyright (c) 2014 Magento Inc. (http://www.magentocommerce.com)
 * @license     http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */
?>
<?php
/**
 * Language switcher template
 *
 * @see Mage_Page_Block_Switch
 */
?>
<?php if(count($this->getStores())>1): ?>
<div class="lang">
	<?php $count = 0; ?>
	<?php foreach ($this->getStores() as $_lang): ?>
		<?php $count++; ?>
	<?php endforeach; ?>
	<?php if($count <= 5): ?>
		<ul>
			<?php foreach ($this->getStores() as $_lang): ?>
				<?php $flagPath = 'images/flags/'.$_lang->getCode().'.png';?>
				<li <?php if($_lang->getId() == $this->getCurrentStoreId()): ?> class="active" <?php endif; ?> role="presentation"><a role="menuitem" tabindex="-1" href="<?php echo $_lang->getCurrentUrl() ?>"><img src="<?php echo $this->getSkinUrl($flagPath) ?>" alt=""/></a></li>
			<?php endforeach; ?>
		</ul>
	<?php else: ?>
	<div class="lang_dropdow">
		<a id="language" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><?php echo $this->__('Language: ') ?>
			<?php foreach ($this->getStores() as $_lang): ?>
				<?php $flagPath = 'images/flags/'.$_lang->getCode().'.png';?>
				<?php if($_lang->getId() == $this->getCurrentStoreId()): ?>
					<img src="<?php echo $this->getSkinUrl($flagPath) ?>" alt="" />
				<?php endif; ?>
			<?php endforeach; ?>
		</a>
		<ul class="dropdown-menu" aria-labelledby="language">
			<?php foreach ($this->getStores() as $_lang): ?>
				<?php $flagPath = 'images/flags/'.$_lang->getCode().'.png';?>
				<li role="presentation"><a role="menuitem" tabindex="-1" href="<?php echo $_lang->getCurrentUrl() ?>"><img src="<?php echo $this->getSkinUrl($flagPath) ?>" alt=""/></a></li>
			<?php endforeach; ?>
		</ul>
	</div>
	<?php endif; ?>
</div>
<?php endif; ?>
